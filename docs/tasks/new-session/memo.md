- `.goose/memory` が `docs/persistent` に紐づいて、学んだことを更新するようにしたら、更新対象のコンテキストを聞いてきて、それを更新する
- タスクディレクトリー、タスクファイルを作る
- タスクに対応したsessionファイルが紐づいてる
- わからないものがあれば、わからないときちんと答える
- URLに `figma` が含まれていたら、そちらを優先的に使う
- MPCの呼び出しをキューする？レビュワーモードでJetbrains MCPを呼び出したり、修正をが必要そうな所を提案していく。キュー考えるべきか、裏で修正案を考えるとか？
- sessionとmcpは非同期で動かせるようにしたい
- プランを開始する時にディレクトリを作成する
  - investigation.md
  - plan.md
  - memo.md
- 調査、計画者、実行者、記憶を一つのプロンプトで管理すればいいのか。instructions からどの命令をされたか判断して、それに対応する行動をしてもらう
- plan/actで概ね問題はないんだが、地味に辛い
  - issueを始めるイニシャルコストが地味に面倒
  - memory bankを組み込めてない
  - MCP呼び出しとかコミットを明示的に命令するのがだるい
  - プランのレビューコストが大きい
  - 一つのタスクの変更箇所が大きいと、レビューのタイミングで見逃す
    - 隗より始めよプランニングにするのはアリかも
  - 依存先の解決が間違えやすい
    - プランのタイミングでチェックしちゃいたいけど
  - １つのagentがそれぞれのMCP Serverを立ち上げて地味に重い
    Figmaで構成する時にviewの構造を可視化されたい
- tasks/<> は、やってる最中のタスクで、完了したら、archiveディレクトリに移動させる。終わったら、移動させる
- レビュー中に問題が発覚したら、私が修正依頼を投げて先にplan.mdの修正を先にする。それで問題なければ実装に戻る
- mermaidはmonokai
- URLがあれば、ネットで調べたり？
- 調査でわかった
- objectiveの解釈もして、合っているか聞いてくる
  - background
  - scope
- プロジェクト単位の長い期間もあるので、別ディレクトリにスペックをきって、タスクをしたら、プロジェクトに紐づけられるようにするとか？PRの紐付けもいいか
- goose立ち上げのタイミングで、lintやprettierも立ち上げて、それがエラーにならないか常に監視するようにする
  - eslintやprettierを裏で立ち上げつつ、コミット前にアクセスしにいく
  - mcpからの返事で何もなければ `--no-verify` でコミットする。し、コミットのタイミングで質問してくれる
- メモリを管理するようにディレクトリを環境変数で定義する
- アーキテクチャはRooCodeを参考にする？
- 調査の時、タスクディレクトリはノイズになるから見に行かない
- investorは、質問に対して、完全な回答ができている場合は、調査内容を保存するか聴いてくるし、まだ質問に対して答えるためにユーザから情報やアドバイスを必要としている場合は質問をしてくる
- タスクを進めながら、planに切り替えるときもあるよね
- executor
  - タスクが完了したタイミングで、チェックをつける
  - タスク単位でのコミット
- architect-mode
  - persistents/(.goose/と同じ)にアーキテクチャの構造を理解して、ファイルを初期化する
    - claude codeの `/init` みたいな感じ
  - ファイルを指定して、「更新してほしい」と言ったら、対象のファイルを更新する（globとかかな？）
    今は、カテゴリとかどうやって想起してるの？

- invester-mode
  - investments/ に調査依頼したことをストックしていく。.goose/memoryと同じ形式？globもいれる？
  - URLとかも渡したら、fetchしてまとめるとかかな
  - 既に激賢いから、フォーマットだけ決める？要約、ファイルとか、mermaidでコードの流れとか、コードのsnippetとか、URLも記載するとか、とりあえず細かく
- planner-mode
  - objectiveがなにか聞いてくれる
  - tasks/<task-name>/{plan, todo}.md にファイルを作成する
  - investerモードで、persistentsやinvestmentsから関連する情報を取ってきたり、コード検索とかして、まとめて、「実現したいことはこれ？」と質問をする。それか、gooseのplannerのように、まだわからないところがあるか質問する
    - 実現したいことが確定したらplan.mdにbackground, objectiveを記載する
    - 「では、修正該当のファイルの調査や、planを考えます」で、plan.mdを記載する
    - plan.mdでいいですか？と聞いてくる。問題なければ、plan.mdに対応した、細かいtask.mdを作成する
  - 絶対パスでpersistent-contexts, investmentsで参照スべきパスを絶対パスとしてplan.mdに書いていく
- executor-mode
  - 過去を忘れて、plan.mdとtodo.mdから実行していく
  - 実行開始前にplan.mdに書かれているファイルを全て読み込んで、実行する
  - 実行のたびにtodo.mdにチェックをしていく
  - Plan にpersistentとinvestments を分けている。学びがあった場合は、persistentで参照してるファイルを対象に更新する？新しいpersistentを更新する必要があればなぜ更新する必要があるか聞いてくれる